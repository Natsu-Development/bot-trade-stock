# Trading Bot Configuration
# Copy this file to .env and update the values as needed

# ====================================
# Server Configuration
# ====================================
# Address of the gRPC server for market data
# For Docker Compose (production/local): use service name 'broker:50051'
# For local development (without Docker): use 'localhost:50051'
GRPC_SERVER_ADDR=broker:50051

# HTTP server port (must start with ':')
HTTP_PORT=:8080

# ====================================
# Bearish Divergence Configuration
# ====================================
# Common settings for all intervals
BEARISH_CRON_START_DATE_OFFSET=200  # Days of historical data
BEARISH_CRON_AUTO_START=true        # Auto-start on boot

# Enable intervals you want to analyze (at least one required)
# Each interval runs independently on its own schedule

# 30-Minute Interval (Short-term scalping)
# Runs at :05 and :35 (staggered from 1H to avoid overlap)
BEARISH_30M_ENABLED=false
BEARISH_30M_SCHEDULE=5,35 * * * *

# 1-Hour Interval (Intraday trading)
# Runs at :00 each hour
BEARISH_1H_ENABLED=false
BEARISH_1H_SCHEDULE=0 */1 * * *

# 1-Day Interval (Swing trading)
BEARISH_1D_ENABLED=true
BEARISH_1D_SCHEDULE=0 9 * * 1-5

# 1-Week Interval (Position trading)
BEARISH_1W_ENABLED=false
BEARISH_1W_SCHEDULE=0 9 * * 1

# ====================================
# Bullish Divergence Configuration
# ====================================
# Common settings for all intervals
BULLISH_CRON_START_DATE_OFFSET=200  # Days of historical data
BULLISH_CRON_AUTO_START=true        # Auto-start on boot

# Enable intervals you want to analyze (at least one required)
# Each interval runs independently on its own schedule

# 30-Minute Interval (Short-term scalping)
# Runs at :10 and :40 (staggered from 1H and different from bearish)
BULLISH_30M_ENABLED=false
BULLISH_30M_SCHEDULE=10,40 * * * *

# 1-Hour Interval (Intraday trading)
# Runs at :00 each hour
BULLISH_1H_ENABLED=false
BULLISH_1H_SCHEDULE=0 */1 * * *

# 1-Day Interval (Swing trading)
BULLISH_1D_ENABLED=true
BULLISH_1D_SCHEDULE=0 10 * * 1-5

# 1-Week Interval (Position trading)
BULLISH_1W_ENABLED=false
BULLISH_1W_SCHEDULE=0 10 * * 1

# ====================================
# Trading Symbols Configuration  
# ====================================
# Comma-separated list of stock symbols to analyze
# Vietnamese stock symbols (adjust for your market)
DEFAULT_SYMBOLS=PDR,SHS,MBS,ABB,TCB

# ====================================
# HTTP Server Configuration
# ====================================
# HTTP server timeout configurations (in seconds)
HTTP_READ_TIMEOUT=30
HTTP_WRITE_TIMEOUT=30
HTTP_IDLE_TIMEOUT=60
HTTP_SHUTDOWN_TIMEOUT=10

# ====================================
# gRPC Client Configuration
# ====================================
# gRPC connection timeout (in seconds)
GRPC_CONNECTION_TIMEOUT=5
# gRPC request timeout (in seconds)
GRPC_REQUEST_TIMEOUT=10
# gRPC market data timeout (in seconds)
GRPC_MARKET_DATA_TIMEOUT=10

# ====================================
# RSI Configuration
# ====================================
# RSI calculation period
RSI_PERIOD=14
# RSI overbought threshold
RSI_OVERBOUGHT_THRESHOLD=70
# RSI oversold threshold
RSI_OVERSOLD_THRESHOLD=30
# RSI extreme overbought threshold
RSI_EXTREME_OVERBOUGHT_THRESHOLD=80
# RSI extreme oversold threshold
RSI_EXTREME_OVERSOLD_THRESHOLD=20

# ====================================
# Divergence Detection Configuration
# ====================================
# Bars to check left of pivot point
DIVERGENCE_LOOKBACK_LEFT=5
# Bars to check right of pivot point
DIVERGENCE_LOOKBACK_RIGHT=5
# Minimum bars between divergence points
DIVERGENCE_RANGE_MIN=5
# Maximum bars between divergence points
DIVERGENCE_RANGE_MAX=60
# Number of recent data points to analyze for divergence
DIVERGENCE_INDICES_RECENT=100

# ====================================
# Business Rules Configuration
# ====================================
# Minimum days required for analysis
MIN_ANALYSIS_DAYS=14
# Maximum days allowed for date range
MAX_DATE_RANGE_DAYS=365
# Minimum symbol length
MIN_SYMBOL_LENGTH=1
# Maximum symbol length
MAX_SYMBOL_LENGTH=10
# Cron job timeout (in minutes)
CRON_JOB_TIMEOUT=10

# ====================================
# Logging Configuration
# ====================================
# Log level for application logs
# Supported values: debug, info, warn, error
LOG_LEVEL=info

# ====================================
# Telegram Notification Configuration
# ====================================
# Enable Telegram notifications for divergence alerts
TELEGRAM_ENABLED=false

# Get bot token from @BotFather on Telegram
TELEGRAM_BOT_TOKEN=

# Get chat ID by sending a message to your bot and calling:
# https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getUpdates
TELEGRAM_CHAT_ID=
